<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>R2U Kakao Map</title>
  <style>
    html,body{margin:0;height:100%}
    #map{width:100%;height:100vh}
  </style>
  <!-- 반드시 JavaScript 키 사용! -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f3beaea643bdd2136019b366df1190cf&autoload=false"></script>
</head>
<body>
  <div id="map"></div>
  <script>
    let map;   // ✅ 전역 선언 (moveTo에서 접근 가능)
    let marker;

    // SDK가 로딩된 후 실행
    kakao.maps.load(function () {
      map = new kakao.maps.Map(document.getElementById('map'), {
        center: new kakao.maps.LatLng(37.4507,126.6530),
        level: 3
      });
    });

    // ✅ Flutter에서 호출할 함수
    function moveTo(lat, lng) {
      const pos = new kakao.maps.LatLng(lat, lng);
      map.setCenter(pos);
      setMarker(pos);
    }

    function setMarker(position) {
      if (marker) marker.setMap(null);
      marker = new kakao.maps.Marker({ position });
      marker.setMap(map);
    }
  </script>
</body>
</html>

