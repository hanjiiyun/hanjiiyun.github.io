<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
  />
  <title>R2U Kakao Map</title>
  <style>
    html, body { margin:0; padding:0; height:100%; }
    #map { width:100%; height:100vh; }
  </style>
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f3beaea643bdd2136019b366df1190cf"></script>
</head>
<body>
  <div id="map"></div>

  <script>
    // ðŸ”¹ ì „ì—­ ë³€ìˆ˜ (ë‹¤ë¥¸ í•¨ìˆ˜ì—ì„œë„ ì“¸ ìˆ˜ ìžˆë„ë¡ varë¡œ ì„ ì–¸)
    var map;
    var routeLine = null;

    // ðŸ”¹ ì§€ë„ ìƒì„±
    (function initMap() {
      const container = document.getElementById('map');
      const options = {
        center: new kakao.maps.LatLng(37.4507, 126.6530), // ì¸í•˜ëŒ€ ê·¼ì²˜
        level: 3
      };
      map = new kakao.maps.Map(container, options);
    })();

    // ðŸ”¹ Flutterì—ì„œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜: ì¶”ì²œ ê²½ë¡œ í‘œì‹œ
    function showRecommendedRoute(routeData) {
      console.log("ðŸ“¡ ì¶”ì²œ ê²½ë¡œ ë°ì´í„°:", routeData);

      const linePath = [];

      // JSONì˜ polyline ë°°ì—´ì„ LatLng ë°°ì—´ë¡œ ë³€í™˜
      (routeData.polyline || []).forEach(function(p) {
        linePath.push(new kakao.maps.LatLng(p.lat, p.lng));
      });

      // ê¸°ì¡´ ê²½ë¡œê°€ ìžˆìœ¼ë©´ ì œê±°
      if (routeLine) {
        routeLine.setMap(null);
      }

      // ìƒˆ Polyline ìƒì„±
      routeLine = new kakao.maps.Polyline({
        map: map,
        path: linePath,
        strokeWeight: 5,
        strokeColor: '#FF4D4D',
        strokeOpacity: 0.9,
        strokeStyle: 'solid'
      });

      // ê²½ë¡œê°€ ìžˆìœ¼ë©´ ì²« ì§€ì ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë™
      if (linePath.length > 0) {
        map.setCenter(linePath[0]);
      }
    }
  </script>

</body>
</html>

